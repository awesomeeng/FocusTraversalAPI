!function(){if("undefined"!=typeof window&&!window.focusManager){var e={forward:function(n,t){if(!(n||n instanceof Node))throw new Error("Invalid element.");var r=e.next(n,t);return r?e.descend(r,t)||r:e.up(n,t)},backward:function(n,t){if(!(n||n instanceof Node))throw new Error("Invalid element.");var r=e.last(n,t);if(r)return r;if(r=e.prev(n,t))return r;for(r=n;;){var o=e.up(r,t);if(!o||o===document.body.parentElement)return null;if((r=e.prev(o,t))&&r!==document.body.parentElement&&r!==document.head)return r;r=o}},forwardList:function(n,t){if(!(n||n instanceof Node))throw new Error("Invalid element.");let r=[];for(;n&&n!==document.body.parentElement;)r.push(n),n=e.forward(n,t);return r},backwardList:function(n,t){if(!(n||n instanceof Node))throw new Error("Invalid element.");let r=[];for(;n&&n!==document.body.parentElement;)r.push(n),n=e.backward(n,t);return r},first:function(e,n){if(!(e||e instanceof Node))throw new Error("Invalid element.");return e.firstElementChild||n&&e.shadowRoot&&e.shadowRoot.firstElementChild||null},last:function(e,n){if(!(e||e instanceof Node))throw new Error("Invalid element.");return n&&e.shadowRoot&&e.shadowRoot.lastElementChild||e.lastElementChild||null},up:function(e,n){if(!(e||e instanceof Node))throw new Error("Invalid element.");return e.parentElement||n&&e.parentNode instanceof DocumentFragment&&e.parentNode.host||null}};e.down=e.first,e.downLast=e.last,e.next=function(e,n){if(!(e||e instanceof Node))throw new Error("Invalid element.");if(n){var t=e.nextElementSibling;return t||(e.parentElement&&e.parentNode instanceof DocumentFragment&&e.parentNode.shadowRoot?e.parentNode.shadowRoot.firstElementChild:null)}return e.nextElementSibling},e.prev=function(e,n){if(!(e||e instanceof Node))throw new Error("Invalid element.");return n&&e.parentElement&&e.parentNode instanceof DocumentFragment&&e.parentNode.shadowRoot?e.parentNode.shadowRoot.lastElementChild:e.previousElementSibling},e.ascend=function(n,t){if(!(n||n instanceof Node))throw new Error("Invalid element.");for(;e.up(n,t);)n=e.up(n,t);return n},e.descend=function(n,t){if(!(n||n instanceof Node))throw new Error("Invalid element.");for(;e.down(n,t);)n=e.down(n,t);return n},e.descendLast=function(n,t){if(!(n||n instanceof Node))throw new Error("Invalid element.");for(;e.downLast(n,t);)n=e.downLast(n,t);return n},e.descendants=function(n,t){if(!(n||n instanceof Node))throw new Error("Invalid element.");for(var r=[],o=e.deepest(n,t);o&&o!==n;)r.push(o),o=e.forward(o,t);return r},e.ancestors=function(n,t){if(!(n||n instanceof Node))throw new Error("Invalid element.");var r=[];let o=n;for(;o&&(r.unshift(o),(o=e.up(o,t))&&o!==document.body.parentElement););return r};var n=function(){var e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],n=e.join(","),t="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function r(e,r){r=r||{};var i,a,c,f=[],l=[],s=e.querySelectorAll(n);for(r.includeContainer&&t.call(e,n)&&(s=Array.prototype.slice.apply(s)).unshift(e),i=0;i<s.length;i++)o(a=s[i])&&(0===(c=u(a))?f.push(a):l.push({documentOrder:i,tabIndex:c,node:a}));return l.sort(d).map(function(e){return e.node}).concat(f)}function o(e){return!(!i(e)||function(e){return function(e){return c(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var n=function(e){for(var n=0;n<e.length;n++)if(e[n].checked)return e[n]}(e.ownerDocument.querySelectorAll('input[type="radio"][name="'+e.name+'"]'));return!n||n===e}(e)}(e)||u(e)<0)}function i(e){return!(e.disabled||function(e){return c(e)&&"hidden"===e.type}(e)||function(e){return null===e.offsetParent||"hidden"===getComputedStyle(e).visibility}(e))}r.isTabbable=function(e){if(!e)throw new Error("No node provided");return!1!==t.call(e,n)&&o(e)},r.isFocusable=function(e){if(!e)throw new Error("No node provided");return!1!==t.call(e,a)&&i(e)};var a=e.concat("iframe").join(",");function u(e){var n=parseInt(e.getAttribute("tabindex"),10);return isNaN(n)?function(e){return"true"===e.contentEditable}(e)?0:e.tabIndex:n}function d(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex}function c(e){return"INPUT"===e.tagName}return r}(),t=[],r=50,o=null,i=document.activeElement||null,a=function(t){if(t||(t=i),!(t&&t instanceof Element))return null;for(;t;)if((t=e.forward(t,!0))&&n.isTabbable(t))return t;return null},u=function(t){if(t||(t=i),!(t&&t instanceof Element))return null;for(;t;)if((t=e.backward(t,!0))&&n.isTabbable(t))return t};document.addEventListener("DOMContentLoaded",function(){document.addEventListener("focus",function(e){var n=e.target;if(e.composedPath){var o=e.composedPath();o.length>0&&(n=o[0])}i=n,t.unshift(i),r>-1&&(t=t.slice(0,r))},!0),document.addEventListener("blur",function(e){var n=e.target;if(e.composedPath){var t=e.composedPath();t.length>0&&(n=t[0])}o=n},!0)}),window.focusManager={focus:function(e){e&&e instanceof Element&&e.focus()},hasFocus:function(e){return!!(e&&e instanceof Element)&&i===e},forward:function(){if(document.activeElement){var e=a();e&&e!==i&&e.focus()}},backward:function(){if(i){var e=u();e&&e!==i&&e.focus()}},next:a,previous:u,orderedElements:function(t){return e.forwardList(e.descend(t||document.body,!0),!0).filter(function(e){return n.isTabbable(e)})}},Object.defineProperty(window.focusManager,"currentlyFocused",{get:function(){return i}}),Object.defineProperty(window.focusManager,"previouslyFocused",{get:function(){return o||null}}),Object.defineProperty(window.focusManager,"history",{get:function(){return[].concat(t)}}),Object.defineProperty(window.focusManager,"historyLimit",{get:function(){return r},set:function(e){e=parseInt(e),isNaN(e)||e<-1||(r=e)>-1&&(t=t.slice(0,r))}})}}();
